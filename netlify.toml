[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

# Enable Netlify Identity for CMS authentication
[context.production]
  command = "npm run build"

# Redirect only for SPA fallback if needed, but exclude admin and identity paths
# For Astro static sites, we generally don't need SPA redirects

# Ensure proper MIME types and headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
